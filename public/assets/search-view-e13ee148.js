import{_ as u,o as h,c,r as p,a as s,t as d,F as f,b as _,d as b}from"./index-0288bccd.js";const v={name:"video-list",props:{socket:{type:Object,default:null},videoList:{type:Object,default:{}},defaultauthor:{type:String,default:""}},data(){return{prehost:"http://localhost:16206/"}},methods:{fetchOpen(t){let e=`${this.prehost}open/${t}`;fetch(e).then()},fetchNoticeMP4(t){let e={vid:t,playlist:null},n=`${this.prehost}notice/mp4`,a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch(n,a).then()},fetchVideoDelete(t,e,n){delete this.videoList[t],this.$emit("delete-vid",t),Object.keys(this.videoList).length===0&&(this.$emit("go-allauthor",this.defaultauthor),this.$emit("delete-author",e));let r={vid:t,withfile:n},o=`${this.prehost}video/`,i={method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};fetch(o,i).then()},copyText(t){window.navigator.clipboard.writeText(t)}}},y=["id"],m={class:"my-3"},g=s("button",{class:"btn disabled"}," info ",-1),k={class:"btn disabled"},$=["onClick"],A=["onClick"],C=["onClick"],L=["onClick"],T={class:"my-3"},S=s("button",{class:"btn disabled"}," open ",-1),w=["onClick"],V={class:"my-3"},x=s("button",{class:"btn disabled"}," delete ",-1),O=["onClick"],j=["onClick"];function D(t,e,n,a,r,o){return h(!0),c(f,null,p(this.videoList,i=>(h(),c("div",{class:"row border my-3",key:i.vid,id:i.vid},[s("div",m,[g,s("button",k,d(i.quality),1),s("button",{class:"btn btn-outline-info",onClick:l=>o.copyText(i.title)},"title ",8,$),s("button",{class:"btn btn-outline-info",onClick:l=>o.copyText(i.description)},"description ",8,A),s("button",{class:"btn btn-outline-info",onClick:l=>o.copyText(i.vlink)},"video link ",8,C),s("button",{class:"btn btn-outline-info",onClick:l=>o.fetchNoticeMP4(i.vid)},"redownload ",8,L)]),s("div",T,[S,s("button",{onClick:l=>o.fetchOpen(i.vid),class:"btn btn-outline-primary"},d(i.title),9,w)]),s("div",V,[x,s("button",{class:"btn btn-outline-danger",onClick:l=>o.fetchVideoDelete(i.vid,i.author,!1)},"video data ",8,O),s("button",{class:"btn btn-outline-danger",onClick:l=>o.fetchVideoDelete(i.vid,i.author,!0)}," video data and file ",8,j)])],8,y))),128)}const N=u(v,[["render",D]]),R={name:"search-nav",components:{VideoList:N},props:{messageSearch:{type:Object,default:null}},watch:{async messageSearch(t,e){if(t){let{dowhat:n,info:a}=t;switch(n){case"fetchAllAuthor":await this.fetchAllAuthor();break;case"fetchAuthorVideo":this.$emit("click-search-router",null),await this.fetchAllAuthor(),await this.fetchAuthorVideo(a);break}}}},data(){return{prehost:"http://localhost:16206/",defaultauthor:"All Author",authorList:{},videoList:{},searchType:!0,searchTypText:"author"}},methods:{titleChange(t){this.videoList=null;let e=t.target.value;if(e.length>0){let n=`${this.prehost}video/title/${e}`;fetch(n).then(a=>a.json()).then(a=>{this.videoList=a})}},changeSearchType(){this.searchType=!this.searchType,this.searchTypText=this.searchType?"author":"title",this.videoList=null},deleteVid(t){delete this.videoList[t]},deleteAuthor(t){delete this.authorList[t];let e=`${this.prehost}notice/fetchallauthor`;fetch(e)},goAllAuthor(t){this.$refs.selectOnAuthor.value=t},async fetchAllAuthor(){let t=`${this.prehost}video/authors`,n=await(await fetch(t)).json();this.authorList=n},async fetchAuthorVideo(t){this.$refs.selectOnAuthor.value=t;let e=`${this.prehost}video/author/${t}`,a=await(await fetch(e)).json();this.videoList=a},authorChange(t){let e=t.target.value;e.includes(this.defaultauthor)?this.videoList=null:this.fetchAuthorVideo(e)}},async created(){await this.fetchAllAuthor()}},B={class:"row my-3"},P={class:"col-auto"},F={class:"btn btn-secondary disabled"},G={key:0,class:"col-auto"},J=["value"],M=["value"],q={key:1,class:"col-auto"},E={for:"vtitle"};function I(t,e,n,a,r,o){const i=_("VideoList");return h(),c("div",null,[s("div",B,[s("div",P,[s("button",{onClick:e[0]||(e[0]=(...l)=>o.changeSearchType&&o.changeSearchType(...l)),class:"btn btn-outline-primary"},"search "),s("button",F,d(this.searchTypText),1)]),r.searchType?(h(),c("div",G,[s("select",{ref:"selectOnAuthor",class:"form-select","aria-label":"Default select example",onChange:e[1]||(e[1]=(...l)=>o.authorChange&&o.authorChange(...l))},[s("option",{selected:"",value:this.defaultauthor},d(this.defaultauthor),9,J),(h(!0),c(f,null,p(this.authorList,l=>(h(),c("option",{value:l,key:l},d(l),9,M))),128))],544)])):(h(),c("div",q,[s("label",E,[s("input",{onInput:e[2]||(e[2]=(...l)=>o.titleChange&&o.titleChange(...l)),class:"form-control",id:"vtitle",type:"text",placeholder:"type title to search"},null,32)])]))]),b(i,{videoList:this.videoList,defaultauthor:this.defaultauthor,onDeleteVid:o.deleteVid,onGoAllauthor:o.goAllAuthor,onDeleteAuthor:o.deleteAuthor},null,8,["videoList","defaultauthor","onDeleteVid","onGoAllauthor","onDeleteAuthor"])])}const z=u(R,[["render",I]]),H={name:"search-view",components:{SearchNav:z},props:{messageSearch:{type:Object,default:null}},methods:{clickSearchRouter(){this.$emit("click-search-router",null)}}},K={class:"container-fluid"};function Q(t,e,n,a,r,o){const i=_("SearchNav");return h(),c("div",K,[b(i,{messageSearch:this.messageSearch,onClickSearchRouter:this.clickSearchRouter},null,8,["messageSearch","onClickSearchRouter"])])}const W=u(H,[["render",Q]]);export{W as default};
