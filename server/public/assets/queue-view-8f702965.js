import{_ as h,o as i,c,F as _,b,a as s,t as d,d as f,f as r,r as y,g as m}from"./index-aade91dc.js";const g={name:"queue-list",props:{messageQueue:{type:Object,default:null}},watch:{messageQueue(e,t){if(e){let{dowhat:l,info:n}=e;switch(l){case"playlistAdd":this.playlistAdd(n);break;case"playlistUpdate":this.playlistUpdate(n);break}}}},data(){return{prehost:"http://localhost:16206/",queueList:{},queueIsZero:"zero playlist"}},methods:{playlistAdd(e){let{playlist:t}=e;this.queueList[t]=e},playlistUpdate(e){let{playlist:t}=e;for(let l in e)this.queueList[t][l]=e[l]},async fetchPlaylistDownload(e){let t=`${this.prehost}queue/download/${e}`;await fetch(t)},fetchOpenNewTab(e){},fetchQueueDelete(e){delete this.queueList[e];let t={playlist:e},l=`${this.prehost}queue/`,n={method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch(l,n).then()},fetchGetAllVid(e){let t={playlist:e},l=`${this.prehost}notice/playlist/`,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch(l,n).then()},fetchQueueAll(){let e=`${this.prehost}queue/all`;fetch(e).then(t=>t.json()).then(t=>{this.queueList=t})}},created(){this.fetchQueueAll()}},k={id:"queuearr",class:"container-fluid"},v={class:"col-md-12"},$=["onClick"],w={class:"col-auto"},Q=["onClick"],C=s("div",{class:"col-2"},null,-1),L={class:"col-auto"},q=["onClick"],O={class:"btn disabled"},A={class:"btn disabled"},N=["onClick"],j={key:0,class:"row border my-3"},T={class:"btn disabled"};function V(e,t,l,n,p,a){return i(),c("div",k,[(i(!0),c(_,null,b(this.queueList,o=>(i(),c("div",{class:"row border my-3",key:o.playlist},[s("div",v,[s("button",{onClick:u=>a.fetchOpenNewTab(o),class:"btn disabled"},d(o.title),9,$)]),s("div",w,[s("button",{class:"btn btn-outline-danger",onClick:u=>a.fetchQueueDelete(o.playlist)}," delete this playlist and all sub task ",8,Q)]),C,s("div",L,[s("button",{onClick:u=>a.fetchGetAllVid(o.playlist),class:"btn btn-outline-info"}," get all video id ",8,q),s("button",O,[r(" total "),s("span",null,d(o.total),1)]),s("button",A,[r(" progress "),s("span",null,d(o.progress),1)]),s("button",{onClick:u=>a.fetchPlaylistDownload(o.playlist),class:"btn btn-outline-info"},"download all video ",8,N)])]))),128)),Object.keys(this.queueList).length===0?(i(),c("div",j,[s("button",T,d(this.queueIsZero),1)])):f("",!0)])}const x=h(g,[["render",V]]),D={name:"queue-view",components:{QueueList:x},props:{messageQueue:{type:Object,default:null}}};function B(e,t,l,n,p,a){const o=y("QueueList");return i(),m(o,{messageQueue:this.messageQueue},null,8,["messageQueue"])}const P=h(D,[["render",B]]);export{P as default};
